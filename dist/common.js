"use strict";(self.webpackChunkworkspace=self.webpackChunkworkspace||[]).push([[76],{6:(e,t,r)=>{function s(e){const t={...e};if(t.make&&(t.make=n(t.make.trim())),t.model&&(t.model=n(t.model.trim())),t.trim&&(t.trim=n(t.trim.trim())),t.bodyStyle){t.bodyStyle=n(t.bodyStyle.trim());const e={"sport utility":"SUV","sports utility vehicle":"SUV","pickup truck":"Truck","pick-up":"Truck","station wagon":"Wagon",convertible:"Convertible",coupe:"Coupe",sedan:"Sedan",hatchback:"Hatchback",minivan:"Minivan",van:"Van"},r=t.bodyStyle.toLowerCase();for(const[s,n]of Object.entries(e))if(r.includes(s)){t.bodyStyle=n;break}}if(t.price&&"string"==typeof t.price){const e=t.price.replace(/[$,\s]/g,""),r=parseInt(e);t.price=isNaN(r)?void 0:r}if(t.mileage&&"string"==typeof t.mileage){const e=t.mileage.replace(/[,\s]/g,""),r=parseInt(e);t.mileage=isNaN(r)?void 0:r}if(t.year&&"string"==typeof t.year){const e=parseInt(t.year);t.year=isNaN(e)?void 0:e}return t.exteriorColor&&(t.exteriorColor=n(t.exteriorColor.trim())),t.interiorColor&&(t.interiorColor=n(t.interiorColor.trim())),t.transmission&&(t.transmission=function(e){const t=e.toLowerCase().trim();return t.includes("automatic")||t.includes("auto")?"Automatic":t.includes("manual")||t.includes("stick")?"Manual":t.includes("cvt")?"CVT":n(e)}(t.transmission)),t.drivetrain&&(t.drivetrain=function(e){const t=e.toLowerCase().trim();return t.includes("front")||t.includes("fwd")?"FWD":t.includes("rear")||t.includes("rwd")?"RWD":t.includes("all")||t.includes("awd")?"AWD":t.includes("4wd")||t.includes("4x4")?"4WD":n(e)}(t.drivetrain)),t.fuelType&&(t.fuelType=function(e){const t=e.toLowerCase().trim();return t.includes("gasoline")||t.includes("gas")||t.includes("petrol")?"Gasoline":t.includes("diesel")?"Diesel":t.includes("electric")||t.includes("ev")?"Electric":t.includes("hybrid")?"Hybrid":t.includes("plug")?"Plug-in Hybrid":n(e)}(t.fuelType)),t.engine&&(t.engine=function(e){let t=e.trim().replace(/\s+/g," ");return t=t.replace(/\bL\b/g,"Liter"),t=t.replace(/\bcyl\b/gi,"Cylinder"),t=t.replace(/\bturbo\b/gi,"Turbo"),t=t.replace(/\bsupercharged\b/gi,"Supercharged"),t}(t.engine)),t.vin&&(t.vin=t.vin.toUpperCase().replace(/[^A-HJ-NPR-Z0-9]/g,""),17!==t.vin.length&&(t.vin=void 0)),t.description&&(t.description=function(e){let t=e.trim().replace(/\s+/g," ");return[/call \d{3}[-.\s]?\d{3}[-.\s]?\d{4}/gi,/visit us at .+/gi,/financing available/gi,/trade-ins welcome/gi,/extended warranty/gi].forEach(e=>{t=t.replace(e,"")}),t=t.replace(/\s+/g," ").trim(),t&&!t.match(/[.!?]$/)&&(t+="."),t}(t.description)),t.condition||(t.condition="Used"),t}function n(e){return e.toLowerCase().replace(/\b\w/g,e=>e.toUpperCase())}function o(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function a(e){return new Intl.NumberFormat("en-US").format(e)+" miles"}function i(e){const t=[];return e.year&&t.push(e.year.toString()),e.make&&t.push(e.make),e.model&&t.push(e.model),e.trim&&t.push(e.trim),t.join(" ")}function c(e,t,r){const s=[],n=[];return e.year&&n.push(`Year: ${e.year}`),e.make&&n.push(`Make: ${e.make}`),e.model&&n.push(`Model: ${e.model}`),e.trim&&n.push(`Trim: ${e.trim}`),e.mileage&&n.push(`Mileage: ${a(e.mileage)}`),e.exteriorColor&&n.push(`Exterior: ${e.exteriorColor}`),e.interiorColor&&n.push(`Interior: ${e.interiorColor}`),e.transmission&&n.push(`Transmission: ${e.transmission}`),e.drivetrain&&n.push(`Drivetrain: ${e.drivetrain}`),e.engine&&n.push(`Engine: ${e.engine}`),e.fuelType&&n.push(`Fuel: ${e.fuelType}`),e.vin&&n.push(`VIN: ${e.vin}`),r&&n.push(`Stock #: ${r}`),n.length>0&&(s.push("VEHICLE DETAILS:"),n.forEach(e=>s.push(`• ${e}`)),s.push("")),e.description&&(s.push("DESCRIPTION:"),s.push(e.description),s.push("")),t.name&&(s.push(`Offered by: ${t.name}`),t.phone&&s.push(`Contact: ${t.phone}`)),s.join("\n")}r.d(t,{$g:()=>o,CS:()=>s,M6:()=>a,WW:()=>i,q0:()=>c})},228:(e,t,r)=>{r.d(t,{I:()=>n});var s=r(265);const n=new class{constructor(){this.logger=new s.Vy("Storage")}async getData(){try{const e=await chrome.storage.local.get(null),t={scrapeResults:[],settings:{autofillOptions:{condition:"Used",uploadPhotos:!0,maxPhotos:20},enabledSites:["autotrader.com","cars.com","cargurus.com","dealer.com"]}};return{scrapeResults:e.scrapeResults||t.scrapeResults,settings:{...t.settings,...e.settings}}}catch(e){throw this.logger.error("Failed to get data from storage:",e),e}}async saveScrapeResult(e){try{const t=await this.getData();t.scrapeResults.unshift(e),t.scrapeResults.length>50&&(t.scrapeResults=t.scrapeResults.slice(0,50)),await chrome.storage.local.set({scrapeResults:t.scrapeResults}),this.logger.info("Saved scrape result:",e.id)}catch(e){throw this.logger.error("Failed to save scrape result:",e),e}}async getScrapeResults(){try{return(await this.getData()).scrapeResults}catch(e){return this.logger.error("Failed to get scrape results:",e),[]}}async deleteScrapeResult(e){try{const t=await this.getData();t.scrapeResults=t.scrapeResults.filter(t=>t.id!==e),await chrome.storage.local.set({scrapeResults:t.scrapeResults}),this.logger.info("Deleted scrape result:",e)}catch(e){throw this.logger.error("Failed to delete scrape result:",e),e}}async clearScrapeResults(){try{await chrome.storage.local.set({scrapeResults:[]}),this.logger.info("Cleared all scrape results")}catch(e){throw this.logger.error("Failed to clear scrape results:",e),e}}async saveSettings(e){try{await chrome.storage.local.set({settings:e}),this.logger.info("Saved settings")}catch(e){throw this.logger.error("Failed to save settings:",e),e}}async getSettings(){try{return(await this.getData()).settings}catch(e){return this.logger.error("Failed to get settings:",e),{autofillOptions:{condition:"Used",uploadPhotos:!0,maxPhotos:20},enabledSites:["autotrader.com","cars.com","cargurus.com","dealer.com"]}}}async exportData(){try{const e=await this.getData();return JSON.stringify(e,null,2)}catch(e){throw this.logger.error("Failed to export data:",e),e}}async importData(e){try{const t=JSON.parse(e);if(!t.scrapeResults||!Array.isArray(t.scrapeResults))throw new Error("Invalid data format: scrapeResults must be an array");if(!t.settings)throw new Error("Invalid data format: settings is required");await chrome.storage.local.set(t),this.logger.info("Imported data successfully")}catch(e){throw this.logger.error("Failed to import data:",e),e}}async getStorageStats(){try{const e=await chrome.storage.local.getBytesInUse(),t=chrome.storage.local.QUOTA_BYTES;return{used:e,total:t,percentage:Math.round(e/t*100)}}catch(e){return this.logger.error("Failed to get storage stats:",e),{used:0,total:0,percentage:0}}}}},265:(e,t,r)=>{r.d(t,{JV:()=>o,Vy:()=>s});class s{constructor(e){this.context=e,this.enabledLevels=new Set(["error","warn","info","debug"])}error(e,...t){this.enabledLevels.has("error")&&(console.error(`[${this.context}] ERROR:`,e,...t),this.sendToBackground("error",e,t))}warn(e,...t){this.enabledLevels.has("warn")&&(console.warn(`[${this.context}] WARN:`,e,...t),this.sendToBackground("warn",e,t))}info(e,...t){this.enabledLevels.has("info")&&(console.info(`[${this.context}] INFO:`,e,...t),this.sendToBackground("info",e,t))}debug(e,...t){this.enabledLevels.has("debug")&&console.debug(`[${this.context}] DEBUG:`,e,...t)}toast(e,t="info"){switch(this.sendToBackground("toast",e,[t]),t){case"error":this.error(`Toast: ${e}`);break;case"warning":this.warn(`Toast: ${e}`);break;default:this.info(`Toast: ${e}`)}}sendToBackground(e,t,r){try{chrome.runtime.sendMessage({type:"LOG_MESSAGE",data:{level:e,context:this.context,message:t,args:r,timestamp:Date.now(),url:window.location.href}}).catch(()=>{})}catch(e){}}startTimer(e){const t=performance.now();return this.debug(`Timer started: ${e}`),()=>{const r=performance.now(),s=Math.round(r-t);this.debug(`Timer finished: ${e} (${s}ms)`)}}trace(e,...t){this.enabledLevels.has("debug")&&console.trace(`[${this.context}] TRACE:`,e,...t)}group(e){return new n(this,e)}}class n{constructor(e,t,r=!1){this.logger=e,r?console.groupCollapsed(`[${e.context}] ${t}`):console.group(`[${e.context}] ${t}`)}log(e,...t){console.log(e,...t)}error(e,...t){this.logger.error(e,...t)}warn(e,...t){this.logger.warn(e,...t)}info(e,...t){this.logger.info(e,...t)}debug(e,...t){this.logger.debug(e,...t)}end(){console.groupEnd()}}const o=new class{constructor(){this.container=null,this.logger=new s("Toast"),this.createContainer()}show(e,t="info",r=5e3){this.container||this.createContainer();const s=this.createToastElement(e,t);this.container.appendChild(s),requestAnimationFrame(()=>{s.style.transform="translateX(0)",s.style.opacity="1"}),setTimeout(()=>{this.removeToast(s)},r),s.addEventListener("click",()=>{this.removeToast(s)}),this.logger.debug(`Showed toast: ${t} - ${e}`)}createContainer(){this.container=document.createElement("div"),this.container.id="vehicle-scraper-toasts",this.container.style.cssText="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      z-index: 10000;\n      pointer-events: none;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    ",document.body.appendChild(this.container)}createToastElement(e,t){const r=document.createElement("div");r.style.cssText=`\n      background: ${this.getBackgroundColor(t)};\n      color: white;\n      padding: 12px 16px;\n      border-radius: 6px;\n      margin-bottom: 8px;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n      max-width: 300px;\n      word-wrap: break-word;\n      transform: translateX(100%);\n      opacity: 0;\n      transition: all 0.3s ease;\n      pointer-events: auto;\n      cursor: pointer;\n      font-size: 14px;\n      line-height: 1.4;\n    `;const s=this.getIcon(t);return r.innerHTML=`\n      <div style="display: flex; align-items: center; gap: 8px;">\n        <span style="font-size: 16px;">${s}</span>\n        <span>${e}</span>\n      </div>\n    `,r}removeToast(e){e.style.transform="translateX(100%)",e.style.opacity="0",setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},300)}getBackgroundColor(e){switch(e){case"success":return"#10B981";case"error":return"#EF4444";case"warning":return"#F59E0B";case"info":return"#3B82F6";default:return"#6B7280"}}getIcon(e){switch(e){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";case"info":return"ℹ️";default:return"📢"}}}}}]);
//# sourceMappingURL=common.js.map